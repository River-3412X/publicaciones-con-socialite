$().ready(function(){
    events_question_edit($(".question-edit"));
});
function events_question_edit(selector){
    selector.each(function(){
        $(this).click(function(e){
            e.preventDefault();
            var button= $(this);
            $.ajax({
                type:"get",
                url:$(this).attr("href"),
                success:function(response){
                    $("#modal_edit_body").html(response);
                    $("#modal_edit").modal("show");
                    $('#question_edit').richText();
                    event_question_update($(".question_update"),button);
                },  
                error:function(error){
                    if(error.responseJSON.message=="Unauthenticated."){
                        location.href=$("#root").attr("href")+"/login";
                    }
                }
            });
        });
    });
}
function  event_question_update(selector,element){
    selector.submit(function(e){
        e.preventDefault();
        $("#modal_edit").modal("hide");
        $.ajax({
            headers:{"X-CSRF-TOKEN":$(this).find("input[name=_token]")},
            url:$(this).attr("action"),
            type:$(this).attr("method"),
            data:$(this).serialize(),
            success:function(response){
                show_toast(response);
                element.parent().parent().parent().next().find(".card-text").html(selector.find("textarea").val());
            },
            error:function(error){
                if(error.responseJSON.message=="Unauthenticated."){
                    location.href=$("#root").attr("href")+"/login";
                }
            }
        });
    });
}